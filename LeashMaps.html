<!DOCTYPE html>
<!--Created by: Matthew Weik; Date Started: 7/28/2016'
	The final goals of this leaflet mapplication is to identify the trails of boulder, those considered OSMP trails, and those trails
	with off-leash access for dogs.
	Update (7/30/2016) - Currently displays the OSMP labeled trails with green trails representing those with bicycle access
	orange trails have no bicycle access.  Available properties are displayed when trails are selected.-->

<html>
<head>
	<title>LeashMaps: Boulder OSMP Trails</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" >
	<script src="OSMPTrails.js" type="text/javascript">// local reference of trail data</script>
	<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" />
	<style>
		body {
			padding: 0;
			margin: 0;
		}
		html, body, #map {
			height: 100%;
		}
	</style>
</head>
<body>
	<div id="map"></div>
	<script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>
	<script>	
	var map = L.map('map').setView([40.025477, -105.254056], 12.2);  
	//Basic grey mapbox tile layer for background
	L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/light-v9/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1Ijoid2Vpa20xNCIsImEiOiJjaXEzMnU5YzAwMThoZnNubm8zN2Fkd3ZyIn0.IYNHwU_JHC6J8Cm1lWRyvg', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
		id: 'mapbox.light'
	}).addTo(map);
	
	function onEachFeature(feature, layer) {
		var popupContent = "Name: " + feature.properties.Name + " (Owned by " + feature.properties.OWNER + ")" + "<br>Type: " + feature.properties.TrailType
			+ "<br>Bicycles: " + feature.properties.Bicycles;
		//Verifies if each feature has properties for popup content 	
		if (feature.properties && feature.properties.popupContent) {
			popupContent += feature.properties.popupContent;
		}

		layer.bindPopup(popupContent);
	}
	
	//adds the data from a GeoJSON file of OSMP trails to the map and applies a style based on a condition
    	L.geoJson(osmp_Trails,{style: function(feature) {
	//changes the color of trail depending on having access to Bicycles or not.
		switch (feature.properties.Bicycles) {
			case 'Yes': return {color: "#228B22"};
			case 'No': return {color: "#FF8C00"};
			}
		}, 
		onEachFeature: onEachFeature
	}).addTo(map);		
	</script>
</body>
</html>
